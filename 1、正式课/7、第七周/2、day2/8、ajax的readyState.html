<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        /* 
        ajax的readyState

        */
        // 1、ajax的四部曲
        //    1、创建一个ajax实例
        let xhr = new XMLHttpRequest() // XMLHttpRequest就是一个内置的类
        // console.log(xhr.readyState) // 0
        // 2、打开一个路径，确定请求方式，同异步，确定资源路径
        xhr.open('get', 'index.html', false);
        // console.log(xhr.readyState) // 1
        // 3、监听函数

        // 当xhr身上的readyState值发生变化的时候他就会触发
        xhr.onreadystatechange = function () {
            console.log(xhr.readyState) // 如果同步输出4  如果一步输出2 3 4

            // xhr.readyState 代表了ajax的请求阶段

            // 如果是同步，如果请求不完，不会执行这个回调，但是readyState内部照样变化 2-->3-->4
            // 只是不能执行而且，扥上面执行完，这个readyState的值变为4，那么最后会执行一个这个回调


            // console.log(xhr.responseText)
            // if(xhr.readyState === 4 && /^2\d{2}$/.test(xhr.status)){
            //     console.log(xhr.responseText)
            // }
            console.log(200)
        }

        // 发送请求
        console.log(100)
        xhr.send() // 如果是同步，ajax请求不完，代码是不会往下走的

        console.log(300)

        /* 
        readyState：
        0：创建了一个ajax实例
        1：确定好了请求方式、路径、同异步
        2：说明服务器已经接受到客户端发来的请求，并且把响应头给了客户端
        3：证明服务器正在给客户端发送数据
        4：客户端已经全部接收到了数据
        */
    </script>
</body>

</html>